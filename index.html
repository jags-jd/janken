<!DOCTYPE html>
<html>
<head>
<script>
let playerPoints = 0;
let computerPoints = 0;

function computerPlay(){
  let x = Math.floor((Math.random() * 3) + 1);
  if (x==1){
    return "rock";
  } else if (x==2) {
    return "paper";
  } else {
    return "scissors";
  }
}

function playRound(playerSelection, computerSelection){
  computerSelection = computerPlay();
  playerSelection = playerSelection.toLowerCase();

  if (playerSelection == "paper" && computerSelection == "rock"){
     return "You win. Paper beats rock.";
  } else  if (playerSelection == "paper" && computerSelection == "scissors"){
     return "You lose. Paper loses to scissors";
  } else if (playerSelection =="rock" && computerSelection == "paper"){
     return "You lose. Rock loses to paper";
  } else if (playerSelection == "scissors" && computerSelection == "paper"){
     return "You win. Scissors beats paper.";
  } else if (playerSelection =="rock" && computerSelection == "scissors"){
     return "You win. Rock beats scissors.";
  } else if (playerSelection == "scissors"&& computerSelection == "rock"){
     return "You lose. Scissors loses to rock";
  } else if (playerSelection == computerSelection){
     return "It's a draw. You both chose " + playerSelection;
  } else{
     return "That is not a valid option. Choose rock,paper or scissors only";
  }
}

function game(){
 let playerSelection;
 playerSelection = prompt("Rock, paper or scissors?","");
 let game1 = playRound (playerSelection, computerPlay()); 
 console.log(game1);
 countPoints(game1);

 playerSelection = prompt("Rock, paper or scissors?","");
 let game2 = playRound (playerSelection, computerPlay()); 
 console.log(game2);
 countPoints(game2);

 playerSelection = prompt("Rock, paper or scissors?","");
 let game3 = playRound (playerSelection, computerPlay()); 
 console.log(game3);
 countPoints(game3);

 playerSelection = prompt("Rock, paper or scissors?","");
 let game4 = playRound (playerSelection, computerPlay()); 
 console.log(game4);
 countPoints(game4);

 playerSelection = prompt("Rock, paper or scissors?","");
 let game5 = playRound (playerSelection, computerPlay()); 
 console.log(game5);
 countPoints(game5);
 
 console.log(findWinner());
 
 return resetScores();
}

function countPoints(result){
 if (result.search("You win.") + 1){
   return playerPoints += 1; 
 } else if (result.search("lose") + 1){
   return computerPoints += 1; 
 } else{
   return;
 }
};

function resetScores(){
 playerPoints = 0;
 computerPoints = 0;
}

function findWinner(){
 if (playerPoints > computerPoints){
   return "You win with a total of " + playerPoints + " points";
 } else if (playerPoints < computerPoints){
   return "You lost. Computer won with a total of " + computerPoints + " points";
 } else {
   return "It's a draw";
 }
}

</script>
</head>
</html>
